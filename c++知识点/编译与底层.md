#### 1. 请你来说一下一个C++源文件从文本到可执行文件经历的过程？

##### 参考回答：

对于C++源文件，从文本到可执行文件一般需要四个过程：

预处理阶段：对源代码文件中文件包含关系（**头文件**）、预编译语句（**宏定义**）**进行分析和替换，生成预编译文件。**

编译阶段：将经过预处理后的预编译文件**转换成特定汇编代码，生成汇编文件**(（1） **词法分析**：将源代码的字符序列分割成一系列的记号。（2） **语法分析**：对记号进行语法分析，产生语法树。（3） **语义分析**：判断表达式是否有意义。（4） **代码优化**：（5） **目标代码生成**：生成汇编代码。（6） **目标代码优化**。)

汇编阶段：将编译阶段生成的汇编文件**转化成机器码，生成可重定位目标文件**

链接阶段：**将多个目标文件及所需要的库连接成最终的可执行目标文件**。其中，**静态链接**：在链接的时候就**已经把要调用的函数或者过程链接到了生成的可执行文件中**，就算你在去把静态库删除也不会影响可执行程序的执行。动态链接：在执行的过程中，再去找要链接的函数，**生成的可执行文件中没有函数代码，只包含函数的重定位信息**，所以当你删除动态库时，可执行程序就不能运行。

#### 2. 请你来回答一下include头文件的顺序以及双引号””和尖括号<>的区别？

##### 参考回答：

双引号和尖括号的区别：编译器预处理阶段查找头文件的路径不一样。

对于使用**双引号**包含的头文件，查找头文件路径的顺序为：

1.当前头文件目录

2.编译器设置的头文件路径（编译器可使用-I显式指定搜索路径）

3.系统变量CPLUS_INCLUDE_PATH/C_INCLUDE_PATH指定的头文件路径

对于使用**尖括号**包含的头文件，查找头文件的路径顺序为：

1.编译器设置的头文件路径（编译器可使用-I显式指定搜索路径）

2.系统变量CPLUS_INCLUDE_PATH/C_INCLUDE_PATH指定的头文件路径

#### 3. 导入C函数的关键字是什么，C++编译时和C有什么不同？

1. **关键字：**在C++中，导入C函数的关键字是**extern**，表达形式为**extern “C”**， extern "C"的主要作用就是为了能够正确实现C++代码调用其他C语言代码。加上extern "C"后，会指示编译器这部分代码按**C语言**的进行编译，而不是C++的。
2. **编译区别：**由于C++支持函数重载，因此编译器编译函数的过程中会将函数的**参数类型**也加到编译后的代码中，而不仅仅是**函数名**；而C语言并不支持函数重载，因此编译C语言代码的函数时不会带上函数的参数类型，一般只包括**函数名**。

```c++
//extern示例
//在C++程序里边声明该函数，会指示编译器这部分代码按C语言的进行编译
extern "C" int strcmp(const char *s1, const char *s2);
 
//在C++程序里边声明该函数
extern "C"{
    #include <string.h>//string.h里边包含了要调用的C函数的声明
}
 
//两种不同的语言，有着不同的编译规则，比如一个函数fun，可能C语言编译的时候为_fun，而C++则是__fun__
```

#### 4. 说说静态局部变量，全局变量，局部变量的特点，以及使用场景

**参考回答**

1. **首先从作用域考虑**：C++里作用域可分为6种：全局，局部，类，语句，命名空间和文件作用域。

全局变量：全局作用域，可以**通过extern作用于其他非定义的源文件**。

静态全局变量 ：全局作用域+文件作用域，所以**无法在其他文件中**使用。

局部变量：局部作用域，比如函数的参数，函数内的局部变量等等。

静态局部变量 ：局部作用域，**只被初始化一次，直到程序结束**。

2. **从所在空间考虑**：除了**局部变量在栈上外**，**其他都在静态存储区**。因为静态变量都在静态存储区，所以下次调用函数的时候还是能取到原来的值。

3. **生命周期**： 局部变量在栈上，出了作用域就回收内存；而全局变量、静态全局变量、静态局部变量都在静态存储区，直到程序结束才会回收内存。

